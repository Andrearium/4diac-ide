<?xml version="1.0" encoding="UTF-8"?>
<FBType Name="E_CTD" Comment="Event-Driven Down Counter">
	<Identification Standard="61499-1-A.x" Classification="Event-driven blocks" Function="Down-counter" Description="&lt;p&gt;Copyright (c) 2017 fortiss GmbH 2019 Johannes Keppler University Linz This program and the accompanying materials are made available under the terms of the Eclipse Public License 2.0 which is available at https://www.eclipse.org/legal/epl-2.0/ SPDX-License-Identifier: EPL-2.0&lt;/p&gt;&#10;" >
	</Identification>
	<VersionInfo Organization="fortiss GmbH" Version="1.0" Author="Alois Zoitl" Date="2017-09-22" Remarks="initial API and implementation and/or initial documentation">
	</VersionInfo>
	<VersionInfo Organization="JKU" Version="1.1" Author="Alois Zoitl" Date="2019-07-09" Remarks="fixed bug in down counting">
	</VersionInfo>
	<CompilerInfo>
	</CompilerInfo>
	<InterfaceList>
		<EventInputs>
			<Event Name="CD" Type="Event" Comment="Count Down">
			</Event>
			<Event Name="LDI" Type="Event" Comment="Load counter value">
				<With Var="PV"/>
			</Event>
		</EventInputs>
		<EventOutputs>
			<Event Name="CDO" Type="Event" Comment="Count Down Output Event">
				<With Var="Q"/>
				<With Var="CV"/>
			</Event>
			<Event Name="LDO" Type="Event" Comment="Reset Output Event">
				<With Var="Q"/>
				<With Var="CV"/>
			</Event>
		</EventOutputs>
		<InputVars>
			<VarDeclaration Name="PV" Type="UINT" Comment="Preset Value"/>
		</InputVars>
		<OutputVars>
			<VarDeclaration Name="Q" Type="BOOL" Comment="CV &amp;lt;= 0"/>
			<VarDeclaration Name="CV" Type="UINT" Comment=""/>
		</OutputVars>
	</InterfaceList>
	<BasicFB>
		<ECC>
			<ECState Name="START" Comment="" x="240.0" y="86.66666666666667">
			</ECState>
			<ECState Name="CD" Comment="" x="860.0" y="86.66666666666667">
				<ECAction Algorithm="CD" Output="CDO"/>
			</ECState>
			<ECState Name="LD" Comment="" x="446.6666666666667" y="606.6666666666667">
				<ECAction Output="LDO"/>
			</ECState>
			<ECTransition Source="START" Destination="CD" Condition="CD[(CV &gt; 0)]" Comment="" x="1033.3333333333335" y="460.0"/>
			<ECTransition Source="CD" Destination="START" Condition="1" Comment="" x="626.6666666666667" y="86.66666666666667"/>
			<ECTransition Source="START" Destination="LD" Condition="LDI" Comment="" x="393.33333333333337" y="506.6666666666667"/>
			<ECTransition Source="LD" Destination="START" Condition="1" Comment="" x="240.0" y="606.6666666666667"/>
		</ECC>
		<Algorithm Name="CD" Comment="">
			<ST><![CDATA[ALGORITHM CD
CV := CV - 1;
Q := (CV <= 0);

END_ALGORITHM]]></ST>
		</Algorithm>
		<Algorithm Name="LDI" Comment="">
			<ST><![CDATA[

ALGORITHM LDI
CV := PV;
Q:= (CV <= 0);
END_ALGORITHM

]]></ST>
		</Algorithm>
	</BasicFB>
</FBType>
